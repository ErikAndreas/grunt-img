<!DOCTYPE html>  <html> <head>   <title>grunt.js</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="grunt.html">                 grunt.js               </a>                                           <a class="source" href="h5bp.html">                 h5bp.js               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               grunt.js             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>                            </td>             <td class="code">               <div class="highlight"><pre><span class="kd">var</span> <span class="nx">path</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;path&#39;</span><span class="p">);</span>

<span class="kd">var</span> <span class="nx">h5bp</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">&#39;./&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <p>This is the main html5-boilerplate build configuration file.</p>

<p>Builds depends on two specific directory created during the process
<code>intermediate/</code> and <code>publish/</code>, the first is used as a staging area, the
second is the final result of the build that was run.</p>

<p>These two values may be changed to something else with the <code>staging</code> and
<code>output</code> config property below, and by changing any task config to match the new value.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">module</span><span class="p">.</span><span class="nx">exports</span> <span class="o">=</span> <span class="kd">function</span><span class="p">(</span><span class="nx">grunt</span><span class="p">)</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Grunt utilities</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">config</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">config</span><span class="p">,</span>
    <span class="nx">utils</span> <span class="o">=</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">utils</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>the staging directory used during the process</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">staging</span> <span class="o">=</span><span class="s1">&#39;intermediate/&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>final build output</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">output</span> <span class="o">=</span> <span class="s1">&#39;publish/&#39;</span><span class="p">;</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>extend the grunt.utils object with h5bp's utilities, wrapping  require
calls to utility libs (rimraf, ncp, mkdirp) as lazy-loaded getters.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">h5bp</span><span class="p">.</span><span class="nx">utils</span><span class="p">.</span><span class="nx">extend</span><span class="p">(</span><span class="nx">utils</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Grunt configuration</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">config</span><span class="p">.</span><span class="nx">init</span><span class="p">({</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>the staging directory used during the process</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">staging</span><span class="o">:</span> <span class="nx">staging</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>final build output</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">output</span><span class="o">:</span> <span class="nx">output</span><span class="p">,</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>environement and common configuration values
for futher usage in tasks that needs them.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">env</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">platform</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">platform</span><span class="p">,</span>
      <span class="nx">win32</span><span class="o">:</span> <span class="nx">process</span><span class="p">.</span><span class="nx">platform</span> <span class="o">===</span> <span class="s1">&#39;win32&#39;</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>filter any files matching one of the below pattern during mkdirs task</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">exclude</span><span class="o">:</span> <span class="s1">&#39;build/** node_modules/** grunt.js package.json *.md&#39;</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">),</span>

    <span class="nx">mkdirs</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">staging</span><span class="o">:</span> <span class="s1">&#39;&lt;config:exclude&gt;&#39;</span><span class="p">,</span>
      <span class="nx">output</span><span class="o">:</span> <span class="s1">&#39;&lt;config:exclude&gt;&#39;</span>
    <span class="p">},</span>

    <span class="nx">usemin</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;**/*.html&#39;</span><span class="p">]</span>
    <span class="p">},</span>

    <span class="nx">manifest</span><span class="o">:</span> <span class="s1">&#39;&lt;config:usemin&gt;&#39;</span><span class="p">,</span>

    <span class="nx">watch</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;js/**/*.js&#39;</span><span class="p">,</span> <span class="s1">&#39;css/**&#39;</span><span class="p">,</span> <span class="s1">&#39;*.html&#39;</span><span class="p">],</span>
      <span class="nx">tasks</span><span class="o">:</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>

      <span class="nx">reload</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">files</span><span class="o">:</span> <span class="s1">&#39;&lt;config:watch.files&gt;&#39;</span><span class="p">,</span>
        <span class="nx">tasks</span><span class="o">:</span> <span class="s1">&#39;default emit&#39;</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">css</span><span class="o">:</span> <span class="p">{</span>
      <span class="s1">&#39;css/style.css&#39;</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;css/style.css&#39;</span><span class="p">]</span>
    <span class="p">},</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <p>are resolved below the output directory</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">rev</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">js</span><span class="o">:</span> <span class="s1">&#39;js/**/*.js&#39;</span><span class="p">,</span>
      <span class="nx">css</span><span class="o">:</span> <span class="s1">&#39;css/**/*.css&#39;</span><span class="p">,</span>
      <span class="nx">img</span><span class="o">:</span> <span class="s1">&#39;img/**&#39;</span>
    <span class="p">},</span>

    <span class="nx">serve</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">staging</span><span class="o">:</span> <span class="p">{</span> <span class="nx">port</span><span class="o">:</span> <span class="mi">3000</span> <span class="p">},</span>
      <span class="nx">output</span><span class="o">:</span> <span class="p">{</span> <span class="nx">port</span><span class="o">:</span> <span class="mi">3001</span> <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">connect</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">staging</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">hostname</span><span class="o">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
        <span class="nx">port</span><span class="o">:</span> <span class="mi">3000</span><span class="p">,</span>
        <span class="nx">logs</span><span class="o">:</span> <span class="s1">&#39;dev&#39;</span><span class="p">,</span>
        <span class="nx">dirs</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">},</span>
      <span class="nx">output</span><span class="o">:</span> <span class="p">{</span>
        <span class="nx">hostname</span><span class="o">:</span> <span class="s1">&#39;localhost&#39;</span><span class="p">,</span>
        <span class="nx">port</span><span class="o">:</span> <span class="mi">3001</span><span class="p">,</span>
        <span class="nx">logs</span><span class="o">:</span> <span class="s1">&#39;default&#39;</span><span class="p">,</span>
        <span class="nx">dirs</span><span class="o">:</span> <span class="kc">true</span>
      <span class="p">}</span>
    <span class="p">},</span>

    <span class="nx">dom</span><span class="o">:</span> <span class="p">{</span>

      <span class="nx">files</span>                   <span class="o">:</span> <span class="p">[</span><span class="s1">&#39;*.html&#39;</span><span class="p">],</span>

      <span class="nx">options</span><span class="o">:</span> <span class="p">{</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>cwd - base directory to work from.
out - optimized assets get resolved to this path.</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="p">},</span>

      <span class="s1">&#39;script[data-build]&#39;</span>    <span class="o">:</span> <span class="nx">h5bp</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">script</span><span class="p">,</span>
      <span class="s1">&#39;link&#39;</span>                  <span class="o">:</span> <span class="nx">h5bp</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">link</span><span class="p">,</span>
      <span class="s1">&#39;img&#39;</span>                   <span class="o">:</span> <span class="nx">h5bp</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">img</span><span class="p">,</span>
      <span class="s1">&#39;script, link, img&#39;</span>     <span class="o">:</span> <span class="nx">h5bp</span><span class="p">.</span><span class="nx">plugins</span><span class="p">.</span><span class="nx">rev</span>
    <span class="p">},</span>

    <span class="nx">lint</span><span class="o">:</span> <span class="p">{</span>
      <span class="nx">files</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;js/*.js&#39;</span><span class="p">],</span>
      <span class="nx">build</span><span class="o">:</span> <span class="p">[</span><span class="s1">&#39;grunt.js&#39;</span><span class="p">,</span> <span class="s1">&#39;tasks/*.js&#39;</span><span class="p">]</span>
    <span class="p">}</span>
  <span class="p">});</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Concat configuration - prepending output / staging values to task's target</p>

<p>files are concat'd into <code>staging/subprop.js</code>
(eg. intermediate/js/scripts.js)</p>

<p>This is necessary config for the built-in min / concat task to operate
on staging or output directory, without the need to prepend their values
directly in the task target or data (as they may be tweaked to some other values)</p>

<p>Will probably flesh out a custom concat / min task, using grunt's helper to
handle these values prepends.</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">concat</span> <span class="o">=</span> <span class="nx">config</span><span class="p">(</span><span class="s1">&#39;concat&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="nx">concat</span><span class="p">[</span><span class="nx">staging</span> <span class="o">+</span> <span class="s1">&#39;js/scripts.js&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;js/plugins.js&#39;</span><span class="p">,</span> <span class="s1">&#39;js/script.js&#39;</span><span class="p">];</span>
  <span class="nx">concat</span><span class="p">[</span><span class="nx">staging</span> <span class="o">+</span> <span class="s1">&#39;css/style.css&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="s1">&#39;css/*.css&#39;</span><span class="p">];</span>
  <span class="nx">config</span><span class="p">(</span><span class="s1">&#39;concat&#39;</span><span class="p">,</span> <span class="nx">concat</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <p>Min configuration - same goes the minify task
(eg. publish/js/scripts.js)</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="kd">var</span> <span class="nx">min</span> <span class="o">=</span> <span class="nx">config</span><span class="p">(</span><span class="s1">&#39;min&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="p">{};</span>
  <span class="nx">min</span><span class="p">[</span><span class="nx">output</span> <span class="o">+</span> <span class="s1">&#39;js/scripts.js&#39;</span><span class="p">]</span> <span class="o">=</span> <span class="p">[</span><span class="nx">staging</span> <span class="o">+</span> <span class="s1">&#39;js/plugins.js&#39;</span><span class="p">,</span> <span class="nx">staging</span> <span class="o">+</span> <span class="s1">&#39;js/script.js&#39;</span><span class="p">];</span>
  <span class="nx">config</span><span class="p">(</span><span class="s1">&#39;min&#39;</span><span class="p">,</span> <span class="nx">min</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <p>Run the following tasks...</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;default&#39;</span><span class="p">,</span> <span class="s1">&#39;intro clean mkdirs concat css min rev usemin manifest&#39;</span><span class="p">);</span>
  <span class="nx">grunt</span><span class="p">.</span><span class="nx">registerTask</span><span class="p">(</span><span class="s1">&#39;reload&#39;</span><span class="p">,</span> <span class="s1">&#39;default connect watch:reload&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <p>dom based tasks - not loaded for windows platform</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">config</span><span class="p">(</span><span class="s1">&#39;env.win32&#39;</span><span class="p">)</span> <span class="o">||</span> <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadTasks</span><span class="p">(</span><span class="s1">&#39;./tasks/dom&#39;</span><span class="p">);</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>regular tasks</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nx">grunt</span><span class="p">.</span><span class="nx">loadTasks</span><span class="p">(</span><span class="s1">&#39;./tasks/support&#39;</span><span class="p">);</span>

<span class="p">};</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 